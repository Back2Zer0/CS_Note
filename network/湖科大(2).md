# 第二章：物理层

## 物理层的基本概念

**物理层基本概念**

- 物理层考虑怎样才能在连接各种计算机的传输媒体上传输数据比特流。
- 物理层为数据链路层**屏蔽了各种传输媒体的差异**，使数据链路层只需要考虑如何完成本层的协议和服务，而不必考虑网络具体的传输媒体是什么 。

**物理层协议主要任务**

- ==机械特性==：指明接口所用接线器的**形状**和**尺寸**、**引脚数目**和**排列**、**固定**和**锁定**装置
- ==电气特性==：指明在接口电缆的各条线上出现的**电压范围**
- ==功能特性==：指明某条线上出现的某一电平的**电压表示何种意义**
- ==过程特性==：指明对于不同功能的各种可能**事件的出现顺序**

## 物理层下的传输媒体

传输媒体分两类：

1. ==导引型==：**电磁波被导引到固体媒体传播**

   - **同轴电缆**： 电缆各层都是同轴心的，因此称同轴电缆 。

      ![img](https://img-blog.csdnimg.cn/img_convert/745cc45e783cc1a37d143ff9f14d4b6c.png) 

     > 基带同轴电缆(50Ω \OmegaΩ)：数字传输，过去用于局域网
     > 宽带同轴电缆(75Ω \OmegaΩ)：模拟传输，目前主要用于有线电视的入户线。

     同轴电缆价格较贵且布线不够灵活和方便，随着集线器的出现，在局域网领域基本上都是采用双绞线作为传输媒体。

   - **双绞线**： 把两根互相绝缘的铜导线并排放在一起，按照一定规则绞合起来就构成了双绞线。

     > 这是种古老且常用的媒体。
     >
     > 绞合作用：抵御外界电磁波干扰，减少相邻导线的电磁干扰。

     有无屏蔽双控线UTP电缆和屏蔽双控线STP电缆，差了一个金属丝屏蔽层而已。

   - **光纤**： 光纤很细，因此必须将其做成结实的光缆。一根光缆少则一根光纤，多则可包括数百根 。

      ![img](https://img-blog.csdnimg.cn/img_convert/d78e2ae85e828fed5d05fdb307a6187a.png) 

     原理

      ![img](https://img-blog.csdnimg.cn/img_convert/b7b6cb9930a9b09aa264dd349620d55e.png) 

     >如果全反射一直进行，则光就会沿着光纤一直传输下去。

     实际上只要入射角大于某个临界角度就可以发生全反射，因此多条不同角度的光可以在光线里一起传输，这种光纤称作**多模光纤**。

      ![img](https://img-blog.csdnimg.cn/img_convert/82803f1386f3cc8242902da4c180096b.png)

     >- **由于色散**(模式、材料、波导色散)，光在多模光纤中传输一定距离后必然产生**失真(脉冲展宽)**
     >- 因此**多模光纤只适合近距离传输**(建筑物内)
     >- 发送光源可使用**发光二极管(便宜)**；接收检测可用光电二极管

     若光纤直径减小到只有一个光的波长，则光纤就像一根波导一样，可使光线一直向前传播，而不会产生多次反射，这样的光纤称作**单模光纤** 

     ![10](https://img-blog.csdnimg.cn/img_convert/dd6081642269f2b343e85e2f0fafad48.png)

     >- 没有模式色散，在`1.31`微米波长附近，材料色散和波导色散大小相等符号相反，两者正好抵消
     >- 单模光纤适合长距离传输且衰减小，但其制造成本高，对光源要求高
     >- 发送光源需要使用**激光发生器(贵)**；接收检测用激光检波器

      
     
     **纤芯直径**
     多模光纤：50微米，62.5微米
     单模光纤：9微米
     纤芯外包层：125微米
     
     **工作波长**
     0.85微米(衰减较大)
     1.30微米(衰减较小)
     1.55微米(衰减较小)
     
     **优点**
     通信容量大(25000~30000GHz的带宽)
     传输损耗小，远距离传输时更加经济
     抗雷电和抗电磁干扰性能好。这在大电流脉冲干扰环境下尤为重要
     无串音干扰，保密性好，不易被窃听
     体积小，重量轻
     
     **缺点**
     割接需要专用设备
     光电接口价格较贵
     
   - 电力线

      > 电力线电话

2. 非导引型：自由空间传播

   - **无线电波**

     > 低频和中频频段用地面波传播；高频和甚高频靠电离层(地球上方`100~500`千米高空的带电离子层)反射

   - **微波**

     > 微波**会穿透电离层**进入宇宙，因此其不能通过电离层反射到很远的地方

     - **地面微波接力通信**

       > 微波是直线传播的，而地球表面是个曲面，因此传播距离受到限制，一般只有50KM左右；如果采用100米高的天线塔，则传播距离可增大到100公里。
       > 为实现远距离通信，必须在一个微波通信信道的两个终端之间建立若干个中继站，中继站把前一阵送来的信号经过放大后再发送到下一站。

     - ##### 卫星通信

       > 在地球站之间，利用位于约`36000KM`高空的人造**同步地球卫星**作为中继器的一种微波接力，其最大特点是通信距离远，传播时延大(约`250~300ms`)。**低轨道卫星**通信系统也已经正在部署。

   - #### 红外线

     > - 点对点无线传输
     > - 直线传播，**中间不能有障碍物**，传输距离短
     > - 传输速率低(`4Mb/s~16Mb/s`)

   - #### 可见光（LiFi）

     > 即光源作为信号源，前景好，暂时未被大范围应用

## 传送方式

1. ### **串行/并行传输**

   - 串行传输是指数据是1个比特1个比特依次发送的，发送端与接收端之间只用1条数据传输线即可。
   - 并行传输是指一次发送n个比特而不是一个比特，在发送端和接收端之间要有n条传输线路。

   > 在计算机网络中，数据在传输线路上的传输时串行传输；而计算机内部(如CPU和内存)多使用并行传输。

2. ### 同步/异步传输

   - 同步传输

     数据块以稳定的比特流形式传输，字节之间没有间隔。接收端在每个比特信号的中间时刻(有区分0,1的标志)进行检测，以判别接收到的是比特0还是1。

     > 由于不同设备的时钟频率存在一定差异，不可能完全相同，在传输大量数据的过程中，所产生的判别时刻的累计误差会导致接收端对比特信号的判别错位。因此**需要采取方法使双方的时钟保持同步。**

     **收发双方时钟同步方法**

     - 外同步：在收发双方之间加一条单独的时钟信号线
     - 内同步：发送端将时钟同步信号编码到发送数据中一起传输(如曼彻斯特编码)

   

   - ### **异步传输**

     > 以字节为独立的传输单位，字节间的时间间隔不是固定的，接收端仅在每个字节的起始处对字节内的比特实现同步，为此**传送前要在每个字节前后加上起始位和结束位。**

     异步是指字节之间异步(字节之间的时间间隔不固定)
     字节中的每个比特仍然要同步(各比特的持续时间是相同的)

3. ### 单工/半双工/全双工（单向通信/..)

   - **单工通信**：通信双方只有一个数据传输方向。  (无线电广播)
   - **半双工通信**：通信双方可以相互传输数据，但不能同时进行。   (对讲机)
   - **全双工通信**：通信双方可以同时发送和接收消息。   (电话)

   **单工需要一条信道；其他的需要两条(一个方向一条)**

## 编码与调制

逻辑前提：

- **消息**(message)包括文字、图片、音频和视频。
- **数据**是运送**消息**的实体；计算机中的网卡将比特1和0变换成相应电信号发送到网线，即信号。
- **信号**是**数据**的电磁表现，由信源(网卡)发出的原始电信号称为**基带信号**。
- 基带信号又分**为数字基带信号**(CPU和内存传输的信号)和**模拟基带信号**(麦克风收到声音后转变的电信号)
  

- 信号需要在信道中进行传输，信道可分为数字信道和模拟信道。

如果使用信道复用技术，传输媒体里可以有多个信道。

> 例如，全双工就需要两个信道，一个发送信道，一个接收信道。

 ![img](https://img-blog.csdnimg.cn/img_convert/b18f1669beb35a39ee9948be52064098.png)

---

- ==编码==：在不改变信号性质的前提下，仅对基带信号的**波形进行变换**，称为编码。编码后产生的信号还是数字信号，可以在数字信道中传输。

- ==调制==：**把基带信号的频率范围搬移到较高的频段**，并转换为模拟信号，称为调制。调制后产生的信号还是模拟信号，可以在模拟信道中传输。

> 码元：在使用**时间域**的波形表示数字信号时，代表不同离散数值的基本波形。



### **常用编码**

 ![img](https://img-blog.csdnimg.cn/img_convert/208b4aa86f0344a70b7240a7189fd9a3.png)

- 不归零编码
  正电平代表比特1，负电平代表比特0。在整个码元时间内，电平不会出现零电平

  > 这种编码方式如何区分连续几个相同电平呢？
  >
  > 这要求发送方发送和接收方接收严格同步，也就**需要额外一根传输线来传输时钟信号**。接收方按照时钟节拍逐个接收码元。

  但是对于计算机网络，多的线不如拿来传输数据，因此由于存在同步问题，计算机中的数据传输不使用不归零编码。

- 归零编码
  每个码元传输结束后信号都要"归零"，所以接收方只要在信号归零后进行采样即可，不需要单独的时钟信号。

  > 实际上，归零编码相当于把时钟信号用"归零"方式编码在了数据之内，这称为"自同步"信号
  >
  > 归零编码中的大部分数据带宽都用来传输"归零"而浪费掉了(编码效率低)

- 曼彻斯特编码
  码元的中间时刻既表示时钟，又表示数据。根据正负跳变来区分比特.

  > 具体如何根据跳变实现同步？
  >
  > 第一次数据跳变的时间记录下来【即半个码元的时间】，此后每过一个码元的时间就进行检测，**根据跳变方向决定数据为0还是1。这个不一定哦**

- 差分曼彻斯特编码
  ①跳变仅表示时钟 ②码元开始处电平是否发生变化表示数据。

  > 比曼彻斯特变化少，更适合较高的传输速率。



### **基本调制方法**

 ![img](https://img-blog.csdnimg.cn/img_convert/51c73793a539432ba07ee24e9db56d69.png) 

>- 数字基带信号：原始的1，0。
>- 调幅：有无载波输出。
>- 调频：频率的大小。
>- 调相：初相度不同。

如上一个码元对应一个比特，如何能让1个码元包含多个比特呢？

可以使用混合调制。`正弦信号A sin ⁡ ω ( x + φ / ω ) `

> 相位和频率是相关的，因此二者不可同时做修改。

通常情况下,**相位和振幅**可以结合起来其一调制，称为正交振幅调制QAM。

> 基本调制成为二元制。
>
> 混合调制可以实现多元制。

**QAM-16**

- `12`种相位
- 每种相位有`1`或`2`种振幅可选
- 可以调制出`16`种码元(波形)，**即`16`个形状可以用`4`个二进制位排列组合表示**，所以一个码元可以对应`4比特`
- 码元与`4`个比特的对应关系要采用**格雷码**【任意两个相邻码元只有一位不同】

 ![img](https://img-blog.csdnimg.cn/img_convert/ea0ebf98e630ad25f023ebbee44642ad.png) 

> 关于QAM-16：
>
> - qam16为什么有12种相位?
> - 12种相位2个振幅为什么有16种波形?
>
> 尚未解决。。。

## 信道的极限容量

> 通信质量较差的信道在传输信号的过程中会发生严重失真(无法识别原信号)【码间串扰】

失真因素

- 码元传输速率
- 信号传输距离
- 噪声干扰
- 传输媒体质量

 那怎么避免这种失真呢？

主要理论有两个：奈氏准则和香农定理。



![img](https://img-blog.csdnimg.cn/img_convert/4d9029c79e56112983b0b6c77c16d779.png) 

 上面的调频、调幅、调相的三种基本调制方法，是二元调制，只能调出两种波形/两种码元。因此每种码元只能有1bit的信息流。

QAM-16可以调制出16种码元，所以每个码元可以携带4bit的信息量。

> - **每个码元信息量的计算**：log(2)2 =1 ；   log(2) 16  = 4 。
>
> - **上限数值**：奈氏准则的推导是在理想条件下得出的，没有考虑噪声干扰、传输媒体质量等，所以实际信道传输的最高码元速率要低于上限数值。
>
> - **信噪比：**信道中的噪声也会影响接收端对码元的识别。
>
>   信道功率越大，噪声功率相对影响越大。

![img](https://img-blog.csdnimg.cn/img_convert/c18867bf0643f63c6160a4ab2dceacb0.png) 

- 在信道带宽一定的情况下，根据奈氏准则和香农公式，要想提高信息的传输速率就必须采用**多元制**【更好的调制方法】和努力**提高**信道中的**信噪比**。
- 自从香农公式发布后，各种新的信号处理和调制方法就不断出现，其目的都是**为了尽可能地接近香农公式给出的传输速率极限。**
  

例题：

 ![img](https://img-blog.csdnimg.cn/img_convert/e7946ee6c7813a441d09a345f4710e74.png) 

 ![img](https://img-blog.csdnimg.cn/img_convert/18408d81d5c3e9441c5bf75815ba45e1.png) 

 ![img](https://img-blog.csdnimg.cn/img_convert/f54bbc25a2d6d351647b24cbd19799ca.png) 



